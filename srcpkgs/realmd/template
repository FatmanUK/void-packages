# Template file for 'realmd'
pkgname=realmd
version=0.17.0
revision=1
_commit=d0bbc1fe5aea56cb2ca93d1ecac69404adcdae9a
wrksrc=realmd-${_commit}
build_style=gnu-configure
hostmakedepends="autoconf automake gettext intltool libxslt pkg-config xmlto"
makedepends="gettext-devel glib-devel libglib-devel polkit-devel mit-krb5-devel"
depends="dbus polkit"
short_desc="DBus service for configuring kerberos and other online identities"
maintainer="Adam J. Richardson <fatman.uk@gmail.com>"
license="LGPL-2.1"
homepage="https://www.freedesktop.org/software/realmd"
distfiles="https://gitlab.freedesktop.org/realmd/realmd/-/archive/${_commit}/realmd-${_commit}.tar.gz"
checksum=746a9d82768cfa86c3b1a4d2779ec2451f90ce5bb4beb71482554d3354a47fc2

do_configure() {
	autoreconf -fiv
	intltoolize --force
	./configure --prefix=/usr --sbindir=/usr/bin --with-distro=suse --without-systemd-unit-dir --without-systemd-journal
}

post_install() {
	vconf ${FILESDIR}/realmd.conf
	# file in wrong place
	vinstall dbus/org.freedesktop.realmd.conf 0644 etc/dbus-1/system.d
	rm ${DESTDIR}/usr/etc/dbus-1/system.d/org.freedesktop.realmd.conf
}
